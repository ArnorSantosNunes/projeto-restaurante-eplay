(window.webpackJsonp=window.webpackJsonp||[]).push([[394,319],{2135:function(e,t,n){e.exports={}},2351:function(e,t,n){"use strict";n(2135)},2463:function(e,t,n){"use strict";n.r(t);n(14),n(11),n(16),n(15),n(13),n(7),n(9);var r=n(20),o=n(21),c=n(4),l=(n(45),n(32),n(82)),d=n(2443),f=n(3),N=n(70);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=Object(f.b)({setup:function(){var e=Object(f.s)().store,t=Object(N.a)().isMobile,n=Object(f.a)((function(){return e.getters["courses/courseSummary"]})),r=Object(f.a)((function(){return e.getters["lectures-sidebar/isNotesOpened"]})),o=Object(f.a)({get:function(){return r.value},set:function(t){return e.dispatch("lectures-sidebar/setNotesOpened",t)}});return Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch("notes/fetchNotes",{courseId:n.value.id});case 2:case"end":return t.stop()}}),t)})))(),{isMobile:t,isOpen:o}},data:function(){return{isSidebarOpened:!1,deleteCandidates:[],searchNote:""}},computed:_(_(_(_(_({},Object(l.c)("lectures-sidebar",["isNotesOpened"])),Object(l.c)("notes",["lectureNotes","query","notesLoading","isCreatingNote","isEditingNote"])),Object(l.c)("lectures",["getCurrentLecture"])),Object(l.c)("courses",{courseSummary:"courseSummary"})),{},{isCoursePage:function(){return"courses"===this.$route.path.split("/")[1]},notes:function(){var e=this.allNotes,t=Object(r.a)(e).reverse();return this.searchNote?Object(d.a)(this.searchNote,e,{fuseOptions:{keys:["html"]}}).results.value.map((function(e){return e.item})):t},allNotes:function(){return this.isCoursePage?this.query({courseId:this.courseSummary.id}):this.lectureNotes(this.getCurrentLecture.id)},newNote:function(){return{anchor:void 0,deleted:void 0,files:[],html:"",lecture:this.getCurrentLecture,position:void 0,quote:"",timecode:void 0}},isMobileNotes:function(){return this.isNotesOpened&&this.isMobile}}),watch:{isMobileNotes:function(e){this.setPopupState(e)}},methods:_(_(_({},Object(l.b)("notes",["fetchNotes","createNote","setCreatinNote","setEditingNote","updateNote","deleteNote","restoreNote"])),Object(l.b)("app",["setPopupState"])),{},{editingNote:function(e){this.setEditingNote(e)},deleteNoteCancel:function(e){this.restoreNote({noteId:e})},deleteNoteTemporary:function(e){this.deleteNote({noteId:e})},saveNote:function(e){this.updateNote({note:e})},createNewNote:function(e){var t=this;return Object(c.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.setCreatinNote(!1),!e){n.next=4;break}return n.next=4,t.createNote({lecture:e.lecture,arg:{html:e.html,quote:e.quote}});case 4:case"end":return n.stop()}}),n)})))()},addFirstNote:function(){this.setCreatinNote(!0)},addNote:function(){this.setCreatinNote(!0),this.scrollToTop()},scrollToTop:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r,dialog,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$refs.noteSidebar){t.next=10;break}return r=e.$refs.noteSidebar,dialog=r.$children[0],o=null===(n=dialog.$children[0])||void 0===n?void 0:n.$children[0].$el,c=null==o?void 0:o.querySelector(".scrollarea__container"),t.next=7,e.$nextTick();case 7:return t.next=9,e.$nextTick();case 9:c&&(c.scrollTop=0);case 10:case"end":return t.stop()}}),t)})))()}})}),O=(n(2351),n(0)),component=Object(O.a)(v,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("ESidebar",{ref:"noteSidebar",staticClass:"note-sidebar",attrs:{"outside-close":!1,value:e.isNotesOpened},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"note-sidebar__title"},[e._v("\n      "+e._s(e.$t("lesson.my notes"))+"\n    ")]),e._v(" "),!e.notesLoading&&e.allNotes.length>0?t("ETextField",{staticClass:"note-sidebar__search",attrs:{size:"m",placeholder:e.$t("notes.search")},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("EX24icsearch")]},proxy:!0}],null,!1,3278551823),model:{value:e.searchNote,callback:function(t){e.searchNote=t},expression:"searchNote"}}):e._e()]},proxy:!0},!e.notesLoading&&e.allNotes.length>0&&e.notes.length||e.isCreatingNote?{key:"default",fn:function(){return[e.isCreatingNote?t("NoteCard",{attrs:{"is-new-note":!0,note:e.newNote},on:{createNewNote:e.createNewNote}}):e._e(),e._v(" "),e._l(e.notes,(function(n){return t("NoteCard",{key:n.id,ref:"note_".concat(n.id),refInFor:!0,attrs:{note:n},on:{editing:e.editingNote,saveNote:e.saveNote,deleteNoteCancel:e.deleteNoteCancel,deleteNote:e.deleteNoteTemporary}})}))]},proxy:!0}:null,{key:"footer",fn:function(){return[(e.allNotes.length>0||e.searchNote.length>0)&&!e.isCoursePage?t("EBtn",{staticClass:"note-sidebar__footer-button",attrs:{color:"secondary",size:"m","full-width":!0,disable:e.notesLoading||e.isCreatingNote||e.isEditingNote},on:{click:e.addNote}},[e._v("\n      "+e._s(e.$t("notes.addNote"))+"\n    ")]):e._e()]},proxy:!0}],null,!0),model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[e._v(" "),e._v(" "),e.notesLoading||e.notes.length||!e.searchNote.length?e._e():[t("div",{staticClass:"note-sidebar__not-found"},[e._v("\n      "+e._s(e.$t("notes.notFound"))+"\n    ")])],e._v(" "),e.notesLoading||e.allNotes.length||e.searchNote.length?e._e():[t("div",{staticClass:"note-sidebar__empty"},[e._v("\n      "+e._s(e.$t("notes.emptyText"))+"\n      "),e.isCoursePage?e._e():t("EBtn",{staticClass:"note-sidebar__create-button",attrs:{size:"m",color:"secondary","full-width":""},on:{click:e.addFirstNote}},[e._v("\n        "+e._s(e.$t("notes.addFirstNote"))+"\n      ")])],1)],e._v(" "),e.notesLoading?[t("EInnerLoading",{attrs:{showing:!0},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n        "+e._s(e.$t("notes.loading"))+"\n      ")]},proxy:!0}],null,!1,4228834636)})]:e._e()],2)}),[],!1,null,"4f1c9c34",null);t.default=component.exports;installComponents(component,{EX24icsearch:n(549).default,ETextField:n(321).default,NoteCard:n(2558).default,EBtn:n(97).default,EInnerLoading:n(511).default,ESidebar:n(1155).default})},2976:function(e,t,n){"use strict";n.r(t);var r=n(3),o=Object(r.b)({setup:function(){var e=Object(r.s)().store;return{courseSummary:Object(r.a)((function(){return e.getters["courses/courseSummary"]}))}}}),c=n(0),component=Object(c.a)(o,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"page page-courses"},[e.courseSummary.id?t("NoteSidebar"):e._e(),e._v(" "),t("NuxtChild")],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{NoteSidebar:n(2463).default})}}]);